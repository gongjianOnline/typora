# 17. Java反射机制

## 概述

运行时获取一个类的变量和方法信息，然后通过获取的信息来创建对象和调用方法的一种机制，这种动机制的动态性可以极大的增强程序的灵活性，程序在运行时期可以任意扩展

## 获取 class 类的对象

通过反射来使用一个类，首先要获取到该类的字节码文件对象，也就是类型为 class 类的对象

示例

```java
/*方式一*/
Class<Student> myClass = Student.class; 
/*方式二*/
Class<?> myClass = Class.forName("文件地址");
/*方式三*/
Class<? extends Student> myClass = new Student().getClass(); 
```

### 获取当前类的公有构造方法

```java
Constructor<?>[] cons = myClass.getConstructors();
```

### 获取到当前类中所有构造方法(包含非公有)

```java
Constructor<Type>[] cons = myClass.getDeclaredConstructors();
```

### 获取当前类中公有无参构造方法,获取不到会报异常

```java
Constructor<Type> cons = myClass.getConstructor();
```

### 获取当前类中带参的公有构造方法,注意参数类型后面要加上 .class

```java
Constructor<Type> cons = myClass.getConstructor(String.class);
```

### 获取构造方法并创建实例对象

```java
Constructor<Student> cons = myClass.getConstructor(String.class);
Student stu = cons.newInstance("xxx")
```

### 获取私有构造方法并创建实例对象

```java
Class<Student> stuc = Student.Class;
Constructor<Student> con = stuc.getDeclaredConstructor(String.class);
con.setAccessible(true) /**抑制权限检测*/
Student student = con.newInstance("xxxx")
```

