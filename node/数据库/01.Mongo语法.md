# Mongo语法

## 数据库概念对比

| SQL                  | Mongo               |
| -------------------- | ------------------- |
| 表（Table）          | 集合 （collection） |
| 行 （Row）           | 文档 （Document）   |
| 列 （Col）           | 字段 （Field）      |
| 主键 （primary Key） | 对象ID （ObjectId） |

## 数据库操作

| 创建数据库 | use demo          |
| ---------- | ----------------- |
| 查看数据库 | show dbs          |
| 删除数据库 | db.dropDatabase() |

## 集合操作

| 创建集合 | db.createCollection(name) |
| -------- | ------------------------- |
| 查看集合 | show collections          |
| 删除集合 | db.collection.drop()      |

## 文档操作

| 创建文档 | db.collection.insertOne({})<br />db.collection.insertMany({}) |
| -------- | ------------------------------------------------------------ |
| 查看文档 | db.collections.find({})<br />db.collections.findOne({})      |
| 删除文档 | db.collection.deleteOne()<br />db.collection.deleteMany()    |
| 更新文档 | db.collection.update({],{},false,true})                      |

## 条件操作

| 大于     | $gt  |
| -------- | ---- |
| 小于     | $lt  |
| 大于等于 | $gte |
| 小于等于 | $lte |

---

## 返回数据库指定的字段

```javascript
// 方式一
const response =  集合名称.findOne({
    查询的字段:查询的参数,
    ...
},'返回的字段1 字段2 字段3 ...')
    
// 方式二
/**
* 通过json方式 1是返回 0是不返回
*/
const response =  集合名称.findOne({
    查询的字段:查询的参数,
    ...
},{key1:1,key2:1,...})

 // 方式三
 /*
 * 通过 select("key")
 */
  const response = 集合名称.findOne({
     查询的字段：查询的参数,
     ...
  }).select('key','key')
```

---

## 批量更新数据技巧

```javascript
// 方式一
/*
* 这里的User是定义好的数据模型
*/
const User = require('./../models/userSchema')
const res =  User.updateMany({ $or: [{ userId: 10001 }, { userId: 10002 }] },{state:2})
/*
* 表示将userId 10001,10002数据中的 state 改为 2
*/

// 方式二
const User = require('./../models/userSchema')
const res = User.updateMany({userId:{$in:[10001,10002]}},{state:2})
```

上面两种方法都会返回删除后的条数