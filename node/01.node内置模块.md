# node 内置模块

## 1. http 模块

```javascript
const http = require("http")
http.createServer((request,response)=>{
    response.write("hello world")
    response.end()
}).listen(3000,()=>{console.log("success server")})
```

---

## 2. url 模块

```javascript
const http = require("http")
const url = require("url")

http.createServer((request,response)=>{
    console.log(url.parse(request.url,true))
    response.writeHeader(200,'content-type','application/json;charset=utf-8')
    response.end('[1,2,3,4]')
}).listen(3000,()=>{console.log("success server")})
```

---

## 3. querystring 模块

```javascript
const querystring = require('node:querystring');
let str = 'name=zhangsan&age=18'
let obj = querystring.parse(str)
console.log(obj)
```

---

## 4. jsonp

node端

```javascript
const http = require('http')
const url = require("url")
http.createServer((request,response)=>{
    let str = url.parse(request.url,true)
    switch(str.pathname){
        case '/app':
            response.end(`${str.query.callback}({
            	name:"admin",
            	password:"123456"
            })`)
        	break;
        default:
            response.end("404")
            break;
    }
}).listen(3000,()=>{console.log("success server")})
```

html 端

```html
<script>
	let sc = document.createElement("script")
    sc.src = "http://localhost:3000/api?callback=xxx"
    document.body.appendChild(sc)
    
    functoin xxx(data){
        console.log(data)
    }
</script>
```

---

## 5. cors

```javascript
const http = require('http')
const url = require("url")

http.createServer((request,response)=>{
    let str = url.parse(request.url,true)
    rsponse.writeHead(200,{
        "content-type":"application/json;charset=utf-8",
        "access-control-allow-origin":"*"
    })
    switch(str.pathname){
        case "/home":
            response.end(`${JSON.stringify({
                name:'admin',
                password:'12345'
            })}`)
            break;
        default:
            break;
    }
}).listen(3000,()=>{console.log('success server')})
```

---

## 6. get 请求

此处的 get 请求是 node作为客户端向第三方平台进行数据交互, 为了解决浏览器和第三方接口之间的跨域问题

```javascript
const http = require("http")
const https = require("https")
const url = require("url")

http.createServer((request,response)=>{
  var urlObj = url.parse(request.url)
  response.writeHead(200,{
    "Content-Type":"application/json;charset=utf-8",
    "access-control-allow-origin":"*"
  })
  switch (urlObj.pathname) {
    case "/home":
      getData((data)=>{
        response.end(data)
      })
      break;
    default:
      response.end('404')
      break;
  }
}).listen(3000,()=>{console.log("success server")})

function getData(cd){
  var data = "";
  https.get(
    "https://i.maoyan.com/api/mmdb/movie/v3/list/hot.json?ct=%E5%BB%8A%E5%9D%8A&ci=106&channelId=4",
    (res)=>{
      res.on("data",(chunk)=>{
        data += chunk
      })
      res.on("end",()=>{
        cd(data)
      })
    }
  )
}
```

---

## 7. post 请求

```javascript
const http = require("http")
const https = require("https")
const url = require("url")

http.createServer((request,response)=>{
  var urlObj = url.parse(request.url)
  response.writeHead(200,{
    "Content-Type":"application/json;charset=utf-8",
    "access-control-allow-origin":"*"
  })
  switch (urlObj.pathname) {
    case "/home":
      postData((data)=>{
        response.end(data)
      })
      break;
    default:
      response.end('404')
      break;
  }
}).listen(3000,()=>{console.log("success server")})

function postData(cd){
  var data = "";
  var options = {
    hostname:'m.xiaomiyoupin.com',
    prot:"443",
    path:"/mtop/market/search/placeHolder",
    method:"POST",
    headers:{
      "Content-Type":"application/json"
    }
  }
  var req = https.request(options,(res)=>{
    res.on("data",(chunk)=>{
      data += chunk
    })
    res.on("end",()=>{
      cd(data)
    })
  })
  req.write(JSON.stringify([{},{"baseParam":{"ypClient":1}}]))
  req.end()


}
```

