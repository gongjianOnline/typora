# ArkTS

## 装饰器

@Component  自定义结构体,可用于UI单元

@State 变量值改变时自动变换UI, 类似于 flutter 中的 .obs 语法

## 自定义组件

示例

```ets
@Component
struct myComponent{
	...
	build(){
		....
	}
	...
}
```

## 自定义页面

```ets
@Entry /*表示页面的默认入口,一个页面有且只有一个*/
@Component
struct IndexPage{
	...
	build(){...}
	...
}
```

## 组件生命周期

| 方法             | 注释                                                      |
| ---------------- | --------------------------------------------------------- |
| aboutToAppear    | 创建自定义组件之后,build 之前调用. 可用来初始化页面的赋值 |
| aboutToDisappear | 销毁周期,注释变量如(定时器)                               |

示例

```ets
@Component
struct MyComponent{
	aboutTOAppear(){console.log("组件初始化")}
	aboutTODisppear(){console.log("组件销毁")}
}
```

## 页面生命周期

| 方法                         | 注释                                                         |
| ---------------------------- | ------------------------------------------------------------ |
| onPageShow()                 | 页面显示监听                                                 |
| onPageHide()                 | 进入后台监听                                                 |
| onBackPagess(){return false} | 页面返回监听,可设置返回值; 返回 true 表示自定义返回逻辑, 返回 flase 表示由系统返回逻辑 |

示例

```ets
@Component
struct MyComponent{
	/*组件的生命周期同样试用*/
	aboutTOAppear(){console.log("组件初始化")}
	aboutTODisppear(){console.log("组件销毁")}
	
	/*页面生命周期*/
	onPageShow(){console.log("页面显示")}
	onPageHide(){console.log("监听到进入后台")}
	onBackPagess(){true flase}
}
```

---

## 动态渲染

### 条件渲染

```ts
colunm(){
    if(true){
        Text("渲染张三")
    }else{
        Text("渲染李四")
    }
}
```

## 循环渲染

ForEach(A,B,C） 该方法接受三个参数，A：必须是数组，循环渲染的数据源；B：子组件生成的模版； C：键值对生成器（和v-for中的key属性思想一致）

示例

```ts
ForEach([1,2,3],(item,index)=>{
    Text(item)
},(item,index)=>index)
```

---

## 状态管理

### 父传子

通过 @State 和 @Link 两个装饰器联合使用，可以建立父子组件的双向数据绑定；和前端框架不同的是，子组件也可以直接改变 @Link 的状态同步到父组件的 @State 中

父组件示例

```ts
import { MyComponent } from "../Component/MyComponent";
@Entry
@Component
struct Index{
	@State name:string = "测试父子响应"
    build(){
        Row(){
            Column(){
                MyComponent({name:$name})
            }
        }
    }
}
```

自组件示例

```ts
@Component
export struct  MyComponent{
  @Link name:string
  build(){
    Text(this.name).fontSize(40)
  }
}
```

---

