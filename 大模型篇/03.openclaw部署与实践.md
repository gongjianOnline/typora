# OpenClaw（clawBot） 保姆级部署与实践

## clawBot是啥

[OpenClaw — Personal AI Assistant](https://openclaw.ai/)

OpenClaw 是一个**开源的个人 AI 助手**（Personal AI Assistant），由开发者 @steipete 创建。这是一个运行在你自己电脑上的智能代理，而非依赖云端的封闭服务。以下是其核心特点：

**核心定位** 它像一位"有眼睛和手的智能同事"——你通过 Discord 或其他通讯工具与它聊天，它就能在你的电脑上执行各种任务，从简单的提醒到复杂的编程工作。

**主要特性**：

1. **本地优先 & 开源** —— 所有上下文和技能都存储在你的设备上，而非某个封闭的"围墙花园"，代码完全开源
2. **持久化记忆** —— 24/7 保持上下文，不会忘记之前的对话和任务状态
3. **强大的自动化能力** —— 支持定时任务（Cron）、提醒、后台任务，能主动监控和触发工作流
4. **开发能力突出** —— 可以管理 Claude Code/Codex 会话，自动运行测试，通过 Sentry webhook 捕获错误并自动修复提交 PR
5. **灵活集成** —— 用户可以通过简单的对话让它为自己搭建 API 代理（如将 CoPilot 转为 API 端点），持续扩展新功能

**适用场景** 不局限于个人助理，也可作为公司助手、家庭助手或团队协作工具。

该项目目前非常早期（仅发布约 19 天），但社区增长迅速，许多开发者认为它代表了"将现有技术组件巧妙粘合在一起的飞跃"，让 AI 真正拥有了在本地计算机上自主操作的能力。

## 实现原理

它的架构是**基于 Node.js 的本地优先 Agent 框架**：

### **核心架构（五层设计）**

| 组件                 | 技术实现                | 功能                                                         |
| :------------------- | :---------------------- | :----------------------------------------------------------- |
| **Gateway**（网关）  | Node.js 守护进程        | 中央控制平面，管理会话、权限验证、消息路由（WebSocket 协议，默认端口 18789） |
| **Agent**（大脑）    | TypeScript + LLM 适配层 | 理解意图、制定分步计划、决定调用哪些工具或技能               |
| **Skills**（工具箱） | Markdown + 脚本描述     | 插件系统，定义 AI 能执行的具体能力（文件操作、浏览器控制、API 调用等） |
| **Channels**（通道） | 各平台 SDK 集成         | 连接 WhatsApp、Telegram、Discord、Slack 等通信平台           |
| **Memory**（记忆）   | Markdown 文件 + SQLite  | 持久化存储对话历史、用户偏好，支持向量检索                   |

### **工作原理（Agent Loop）**

当用户发送一条消息，流程是这样的：

**1. 上下文组装**

- Agent 将系统提示词（System Prompt，仅约 1000 tokens）、Session 历史、可用工具列表拼接成完整 Prompt 发送给 LLM

**2. 模型推理（LLM 拆解任务）**

- LLM 决定下一步行动：直接回复、调用工具，或请求更多信息

**3. 工具执行（核心）** OpenClaw 的核心工具集就是**操作系统交互能力**：

```json
{
  "tools": [
    "bash",  // 执行 shell 命令
    "read",  // 读取文件内容
    "write", // 写入文件
    "edit"   // 编辑文件
  ]
}
```

- LLM 输出 `tool_call` → Agent 解析参数 → 在本地系统执行 → 返回执行结果给 LLM

**4. 循环迭代**

- 这是一个**Agent Loop**：只要 LLM 还在调用工具，循环就继续，直到生成最终回复
- 整个过程是**事件驱动架构**，支持流式输出

### **与操作系统的深度集成**

**文件系统操作**：

- 直接通过 `read`、`write`、`edit` 操作本地任意文件
- 工作目录隔离：每个 Agent 有自己的工作区 `~/clawd/<agent-name>/sandbox`

**Shell 命令执行**：

- 通过 `bash` 工具执行任意本地命令，比如运行测试、部署服务、安装软件等
- 这也是它被认为"危险"的原因——默认拥有运行用户的系统权限

**浏览器自动化**：

- 内置 browser 工具，可控制浏览器进行网页导航、截图、点击等操作

**MCP 支持**：

- 采用 **Model Context Protocol**（与 Claude Desktop 相同的标准），通过 MCP Server 连接外部服务

---

## windows 部署

使用 PowerShell 执行安装命令

```shell
iwr -useb https://openclaw.ai/install.ps1 | iex
```

![](https://gjweb.top/wp-content/uploads/2026/01/1-1024x257.png)

执行命令后需要等待十几分钟，命令行会自动安装 openclaw ，之后会自动弹出配置项

![](https://gjweb.top/wp-content/uploads/2026/01/4-1024x836.png)

同意安全协议

![](https://gjweb.top/wp-content/uploads/2026/01/5-1024x161.png)

引导模式选择快速启动

![](https://gjweb.top/wp-content/uploads/2026/01/6-1024x836.png)

选择要接入的模型--这里可以选择 QWen 模型

![](https://gjweb.top/wp-content/uploads/2026/01/7.png)

进行 Qwen-code 的 auth 认证

![](https://gjweb.top/wp-content/uploads/2026/01/9.png)

选择模型模式--选择当前默认模型

![](https://gjweb.top/wp-content/uploads/2026/01/10-1.png)

选择是否选择客户端，这里可以选择最后一个，启用一个本地的web服务

![](https://gjweb.top/wp-content/uploads/2026/01/11.png)

是否配置 skills ，这里暂时选择 否

![](https://gjweb.top/wp-content/uploads/2026/01/12-1024x457.png)

配置网关服务，这里正常会报错，当访问 127.0.0.1:18789/?token=“” 会访问不到；尝试手动启动网关

```ssh
openclaw gateway --port 18789 --verbose
```

看到下方说明 OpenClaw 已经部署成功

![](https://gjweb.top/wp-content/uploads/2026/01/13-1024x540.png)



### 网关失败的问题

当访问 18789 端口后面需要拼接 token 参数，这个token 默认会存在浏览器 **localStorage** 里面的，又是访问的时候可能会丢失，可以通过下面命令查看当前 token

```ssh
openclaw onboard --install-daemon
```

![](https://gjweb.top/wp-content/uploads/2026/01/14.png)

### 部署测试

![](https://gjweb.top/wp-content/uploads/2026/01/15-1024x496.png)

部署成功，测试完成，可以体验一下桌面贾维斯了









